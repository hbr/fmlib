<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Array (fmlib_std.Fmlib_std.Array)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">fmlib_std</a> &#x00BB; <a href="../index.html">Fmlib_std</a> &#x00BB; Array</nav><header class="odoc-preamble"><h1>Module <code><span>Fmlib_std.Array</span></code></h1><p>A thin wrapper around <code>Stdlib.Array</code> with additional functions and sets and maps based on arrays</p><p>Use <code>Stdlib.Array</code> in case you need functions which are not contained in this module. There are no problems using <code>Fmlib_std.Array</code> and <code>Stdlib.Array</code>, because both datatypes are identical.</p><p>Futhermore there are the modules <code>Set</code> and <code>Map</code> which implement finite sets and finite maps based on sorted arrays. For small sets and maps, the array based implementations are superior to tree based implementations like avl trees or red black trees, because they have a better cache behaviour.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#basic-array-functions">Basic Array Functions</a></li><li><a href="#binary-search">Binary Search</a></li><li><a href="#sets-and-maps-based-on-arrays">Sets and Maps based on arrays</a></li></ul></nav></div><div class="odoc-content"><h2 id="basic-array-functions"><a href="#basic-array-functions" class="anchor"></a>Basic Array Functions</h2><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span><span> = <span><span class="type-var">'a</span> array</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-length"><a href="#val-length" class="anchor"></a><code><span><span class="keyword">val</span> length : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>length arr</code> The length of the array <code>arr</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-valid_index"><a href="#val-valid_index" class="anchor"></a><code><span><span class="keyword">val</span> valid_index : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>valid_index i arr</code> Is <code>i</code> a valid index into the array <code>arr</code>?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span><span class="keyword">val</span> is_empty : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Is the array empty?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-has_some"><a href="#val-has_some" class="anchor"></a><code><span><span class="keyword">val</span> has_some : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Does the array have at least one element?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>get arr i</code> The <code>i</code>th element of the array <code>arr</code>.</p><p>Precondition: <code>0 &lt;= i &amp;&amp; i &lt; length [arr]</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-first"><a href="#val-first" class="anchor"></a><code><span><span class="keyword">val</span> first : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>first xs</code> The first element of the array <code>xs</code>.</p><p>Precondition: <code>has_some xs</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-last"><a href="#val-last" class="anchor"></a><code><span><span class="keyword">val</span> last : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>last xs</code> The last element of the array <code>xs</code>.</p><p>Precondition: <code>has_some xs</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set arr i value</code> Set the <code>i</code>th element of the array <code>arr</code> to <code>value</code>.</p><p>Precondition: <code>0 &lt;= i &amp;&amp; i &lt; length [arr]</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Same as Stdlib.Array.make</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Same as Stdlib.Array.init</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-append"><a href="#val-append" class="anchor"></a><code><span><span class="keyword">val</span> append : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>append xs ys</code> Concatenate the two arrays <code>xs</code> and <code>ys</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-insert"><a href="#val-insert" class="anchor"></a><code><span><span class="keyword">val</span> insert : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>insert i x xs</code> Insert the element <code>x</code> at position <code>i</code> into the array <code>xs</code>.</p><p>Make place by pushing up the elements <code>i</code>, <code>i + 1</code>, ... one position.</p><p>Precondition: <code>0 &lt;= i &amp;&amp; i &lt;= length xs</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-replace"><a href="#val-replace" class="anchor"></a><code><span><span class="keyword">val</span> replace : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>replace i x xs</code> Replace the <code>i</code>th element of <code>xs</code> by <code>x</code>.</p><p>Precondition. <code>0 &lt;= i &amp;&amp; i &lt; length xs</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span><span class="keyword">val</span> remove : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>remove i xs</code> Remove the <code>i</code>th element from the array <code>xs</code>.</p><p>Precondition: <code>0 &lt;= i &amp;&amp; i &lt; length xs</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_first"><a href="#val-remove_first" class="anchor"></a><code><span><span class="keyword">val</span> remove_first : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>remove_first xs</code> Remove the first element from the array <code>xs</code>.</p><p>Precondition: <code>has_some xs</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_last"><a href="#val-remove_last" class="anchor"></a><code><span><span class="keyword">val</span> remove_last : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>remove_last xs</code> Remove the last element from the array <code>xs</code>.</p><p>Precondition: <code>has_some xs</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>map f arr</code> Create a new array by mapping all elements of the original array by the function <code>f</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_left"><a href="#val-fold_left" class="anchor"></a><code><span><span class="keyword">val</span> fold_left : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>fold_left f start arr</code></p><p>Fold the folding function <code>f</code> with start value <code>start</code> over the array <code>arr</code>.</p><p>Compute</p><pre class="language-ocaml"><code>    (f (... (f (f start arr.(0)) arr.(1)) ...) arr.(n - 1)</code></pre><p>where <code>n = length arr</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-foldi_left"><a href="#val-foldi_left" class="anchor"></a><code><span><span class="keyword">val</span> foldi_left : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>foldi_left f start arr</code></p><p>Like <code>fold_left</code> with the current index as an additional argument to the folding function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_right"><a href="#val-fold_right" class="anchor"></a><code><span><span class="keyword">val</span> fold_right : <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>fold_right f arr start</code></p><p>Compute</p><pre class="language-ocaml"><code>    f arr.(0) (f arr.(1) ( ... (f arr.(n - 1) start) ... ))</code></pre><p>where <code>n = length arr</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-copy"><a href="#val-copy" class="anchor"></a><code><span><span class="keyword">val</span> copy : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Make a copy of the array.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span><span class="keyword">val</span> sub : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>sub arr start len</code> The subarray of <code>arr</code> starting at <code>start</code> with lenght <code>len</code>.</p><p>Precondition: <code>0 &lt;= start &amp;&amp; start + len &lt;= length arr</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-blit"><a href="#val-blit" class="anchor"></a><code><span><span class="keyword">val</span> blit : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>blit src src_pos dst dst_pos len</code></p><p>Copy <code>len</code> values from array <code>src</code> starting at <code>src_pos</code> to array <code>dst</code> starting at <code>dst_pos</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p><code>find p arr</code></p><p>Find the element satisfying the predicate <code>p</code> in the array <code>arr</code>. Return <code>None</code> if no such element exists.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-for_all"><a href="#val-for_all" class="anchor"></a><code><span><span class="keyword">val</span> for_all : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>for_all p arr</code></p><p>Do all elements of the array <code>arr</code> satisfy the predicate <code>p</code>?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exists"><a href="#val-exists" class="anchor"></a><code><span><span class="keyword">val</span> exists : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>exists p arr</code></p><p>Exists an element of the array <code>arr</code> which satisfies the predicate <code>p</code>?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-push"><a href="#val-push" class="anchor"></a><code><span><span class="keyword">val</span> push : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>push a arr</code> Push element <code>a</code> to the rear end of the array <code>arr</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-push_front"><a href="#val-push_front" class="anchor"></a><code><span><span class="keyword">val</span> push_front : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>push_front a arr</code> Push element <code>a</code> to the front end of the array <code>arr</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_list"><a href="#val-to_list" class="anchor"></a><code><span><span class="keyword">val</span> to_list : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> list</span></span></code></div><div class="spec-doc"><p><code>to_list arr</code> Convert the array <code>arr</code> to a list with the same content.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_list"><a href="#val-of_list" class="anchor"></a><code><span><span class="keyword">val</span> of_list : <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> array</span></span></code></div><div class="spec-doc"><p><code>of_list lst</code> Convert the list <code>lst</code> to an array with the same content.</p></div></div><h2 id="binary-search"><a href="#binary-search" class="anchor"></a>Binary Search</h2><div class="odoc-spec"><div class="spec value anchored" id="val-binsearch"><a href="#val-binsearch" class="anchor"></a><code><span><span class="keyword">val</span> binsearch : 
  <span><span>(<span><span class="type-var">'key</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'key</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'key</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'key</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  int * bool</span></code></div><div class="spec-doc"><p><code>binsearch compare key_of key arr</code></p><p>Search the position of <code>key</code> in <code>arr</code>. Assume that the array <code>arr</code> is sorted without duplicates. It returns the pair <code>position, exact_flag</code> with the meaning</p><pre class="language-ocaml"><code>    exact_flag          =&gt;      key = key_of arr.(position)

    not exact_flag      =&gt;      key &lt; key_of arr.(position)</code></pre><p>Corner case: <code>position = length arr, exact_flg = false</code>. This corresponds to a fictitious key of <code>+infinity</code> at the illegal position <code>length arr</code>.</p><p>The array <code>arr</code> consists of elements of type <code>'a</code>. The function <code>key_of</code> extracts a key from an element of the array. The keys are compared using the comparison function <code>compare</code> with the usual meaning:</p><p><code>compare a b &lt; 0</code> if and only if <code>a &lt; b</code></p><p><code>compare a b = 0</code> if and only if <code>a = b</code></p><p><code>compare a b &gt; 0</code> if and only if <code>a &gt; b</code></p></div></div><h2 id="sets-and-maps-based-on-arrays"><a href="#sets-and-maps-based-on-arrays" class="anchor"></a>Sets and Maps based on arrays</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Set"><a href="#module-Set" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Set/index.html">Set</a></span><span> (<a href="Set/argument-1-Key/index.html">Key</a> : <a href="../Interfaces/module-type-SORTABLE/index.html">Interfaces.SORTABLE</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A set based on arrays</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Map"><a href="#module-Map" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Map/index.html">Map</a></span><span> (<a href="Map/argument-1-Key/index.html">Key</a> : <a href="../Interfaces/module-type-SORTABLE/index.html">Interfaces.SORTABLE</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A map based on arrays</p></div></div></div></body></html>
