<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Map (fmlib_std.Fmlib_std.Btree.Map)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">Index</a> &#x00BB; <a href="../../../index.html">fmlib_std</a> &#x00BB; <a href="../../index.html">Fmlib_std</a> &#x00BB; <a href="../index.html">Btree</a> &#x00BB; Map</nav><header class="odoc-preamble"><h1>Module <code><span>Btree.Map</span></code></h1><p>A finite map implemented by a B tree.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#parameters">Parameters</a></li><li><a href="#signature">Signature</a></li><li><a href="#map-api">Map API</a></li><li><a href="#stream-of-key-value-pairs">Stream of key value pairs</a></li></ul></nav></div><div class="odoc-content"><h2 id="parameters"><a href="#parameters" class="anchor"></a>Parameters</h2><div class="odoc-spec"><div class="spec parameter anchored" id="argument-1-Key"><a href="#argument-1-Key" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="argument-1-Key/index.html">Key</a></span><span> : <a href="../../Interfaces/module-type-SORTABLE/index.html">Interfaces.SORTABLE</a></span></code></div></div><h2 id="signature"><a href="#signature" class="anchor"></a>Signature</h2><h2 id="map-api"><a href="#map-api" class="anchor"></a>Map API</h2><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../Interfaces/module-type-MAP/index.html">Interfaces.MAP</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../Interfaces/module-type-MAP/index.html#type-key">key</a> = <a href="argument-1-Key/index.html#type-t">Key.t</a></span></span></code></summary><div class="odoc-spec"><div class="spec type anchored" id="type-key"><a href="#type-key" class="anchor"></a><code><span><span class="keyword">type</span> key</span><span> = <a href="argument-1-Key/index.html#type-t">Key.t</a></span></code></div><div class="spec-doc"><p>Type of the keys</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div><div class="spec-doc"><p>Type of a map with keys of type <code>key</code> and values of type <code>'a</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span><span class="keyword">val</span> is_empty : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Is the map empty?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cardinal"><a href="#val-cardinal" class="anchor"></a><code><span><span class="keyword">val</span> cardinal : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>cardinal map</code> The cardinality of the map i.e. the number of key value pairs in the map.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_left"><a href="#val-fold_left" class="anchor"></a><code><span><span class="keyword">val</span> fold_left : <span><span>(<span><span class="type-var">'accu</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'accu</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'accu</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'accu</span></span></code></div><div class="spec-doc"><p><code>fold_left f start map</code></p><p>Fold the bindings in the map <code>map</code> from left to right i.e. lexically ascending using the start value <code>start</code> for the accumulator and the folding function <code>f</code> where <code>f</code> is applied <code>f accue key value</code> yielding a new accumulator by consuming one key value pair.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_right"><a href="#val-fold_right" class="anchor"></a><code><span><span class="keyword">val</span> fold_right : <span><span>(<span><span class="type-var">'accu</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'accu</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'accu</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'accu</span></span></code></div><div class="spec-doc"><p><code>fold_left f start map</code></p><p>Fold the bindings in the map <code>map</code> from right to left i.e. lexically descending using the start value <code>start</code> for the accumulator and the folding function <code>f</code> where <code>f</code> is applied <code>f accu key value</code> yielding a new accumulator by consuming one key value pair.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bindings"><a href="#val-bindings" class="anchor"></a><code><span><span class="keyword">val</span> bindings : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-key">key</a> * <span class="type-var">'a</span>)</span> list</span></span></code></div><div class="spec-doc"><p>The list of key value pairs in the map in ascending order.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_opt"><a href="#val-find_opt" class="anchor"></a><code><span><span class="keyword">val</span> find_opt : <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span></span></code></div><div class="spec-doc"><p><code>find_opt key map</code></p><p>Find the value which is bound to the key <code>key</code> in the map <code>map</code>. Return <code>None</code> if no value is bound to <code>key</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>The empty map.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>add key value map</code> Add the key value pair <code>key, value</code> to the map. If the map has already a key value pair with the key <code>key</code> then overwrite the old value with the new value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span><span class="keyword">val</span> remove : <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>remove key map</code> Remove the key value pair with the key <code>key</code> from the map <code>map</code>. If the key is not present, then do nothing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update"><a href="#val-update" class="anchor"></a><code><span><span class="keyword">val</span> update : <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span><span class="type-var">'a</span> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>update key f map</code></p><p>Update the value bound to the key <code>key</code> in the map <code>map</code> by the update function <code>f</code>. If no value is bound to <code>key</code> then <code>f None</code> is called. If <code>value</code> is bound to <code>key</code> then <code>f (Some value)</code> is called.</p><p>If <code>f</code> returns <code>None</code> then no value is added and the old binding is deleted (if it existed before).</p><p>If <code>f</code> return <code>Some new_value</code> then the old value is updated, if existed, or the new value is added if no old value existed before.</p></div></div></details></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_list"><a href="#val-of_list" class="anchor"></a><code><span><span class="keyword">val</span> of_list : <span><span><span>(<a href="argument-1-Key/index.html#type-t">Key.t</a> * <span class="type-var">'a</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><h2 id="stream-of-key-value-pairs"><a href="#stream-of-key-value-pairs" class="anchor"></a>Stream of key value pairs</h2><p>All key value pairs of a finite map can be considered as a sorted list of key value pairs. It is possible to iterate over this sequence with the help of the function <code>fold_left</code>. However this function performs the whole iteration.</p><p>Sometimes it is desirable to iterate over the sequence of the sorted key value pairs and keep the control over the iteration. For that purpose it is convenient to have the finite map as a stream of key value pairs.</p><div class="odoc-spec"><div class="spec type anchored" id="type-source"><a href="#type-source" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a source</span></span></code></div><div class="spec-doc"><p>Type of a stream of key value pairs.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_source"><a href="#val-make_source" class="anchor"></a><code><span><span class="keyword">val</span> make_source : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-source">source</a></span></span></code></div><div class="spec-doc"><p>Convert the map into a stream of key value pairs.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-has_more"><a href="#val-has_more" class="anchor"></a><code><span><span class="keyword">val</span> has_more : <span><span><span class="type-var">'a</span> <a href="#type-source">source</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Has the stream of key value pairs more elements?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-peek"><a href="#val-peek" class="anchor"></a><code><span><span class="keyword">val</span> peek : <span><span><span class="type-var">'a</span> <a href="#type-source">source</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="argument-1-Key/index.html#type-t">Key.t</a> * <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>The next key value pair of the stream.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-advance"><a href="#val-advance" class="anchor"></a><code><span><span class="keyword">val</span> advance : <span><span><span class="type-var">'a</span> <a href="#type-source">source</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-source">source</a></span></span></code></div><div class="spec-doc"><p><code>advances source</code> Advance the stream by one element.</p><p>Precondition: <code>has_more source</code></p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Source"><a href="#module-Source" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Source/index.html">Source</a></span><span> (<a href="Source/argument-1-Value/index.html">Value</a> : <a href="../../Interfaces/module-type-ANY/index.html">Interfaces.ANY</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module which satisfies the interface <a href="../../Interfaces/module-type-SOURCE/index.html"><code>Interfaces.SOURCE</code></a></p></div></div></div></body></html>
