<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Result (fmlib_std.Fmlib_std.Result)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">fmlib_std</a> &#x00BB; <a href="../index.html">Fmlib_std</a> &#x00BB; Result</nav><header class="odoc-preamble"><h1>Module <code><span>Fmlib_std.Result</span></code></h1><p>Result: Handling results of operations which can fail</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#overview">Overview</a></li><li><a href="#api">API</a></li><li><a href="#monad">Monad</a></li></ul></nav></div><div class="odoc-content"><h2 id="overview"><a href="#overview" class="anchor"></a>Overview</h2><p>Operations returning a result type can be used to have some <i>functional exception handling</i>.</p><p>Let's say that you have some operatios returning a result object.</p><pre class="language-ocaml"><code>    let op1 ...  : (int,    error) result  = ...
    let op2 ...  : (char,   error) result = ...
    let op3 ...  : (string, error) result = ...
    let op3 ...  : (t,      error) result = ...</code></pre><p>You can chain these operations by concentrating on the success case only and handling the error case at the end of the chain.</p><pre class="language-ocaml"><code>    match
        let* i = op1 ...  in
        let* c = op2 ... i ...  in
        let* s = op3 ... i ... c ...  in
        op4 ... i ... c ... s
    with
    | Ok x -&gt;
        (* Handling of the success case *)
    | Error e -&gt;
        (* Handling of the error case which might have
           occurred in any of the steps *)</code></pre><p>A simple example:</p><pre class="language-ocaml"><code>    type 'a r = ('a, string) result

    let add (a: int r) (b: int r): int r =
        let* x = a in
        let* y = b in
        Ok (x + y)

    let divide (a: int r) (b: int r): int r =
        let* x = a in
        let* y = b in
        if y = 0 then
            Error &quot;Division by Zero&quot;
        else
            Ok (x / y)

    assert (
        add (Ok 1) (divide (Ok 2) (Ok 0))
        =
        Error &quot;Division by Zero&quot;
    )

    assert (
        add (Ok 1) (divide (Ok 10) (Ok 2))
        =
        Ok 6
    )</code></pre><h2 id="api"><a href="#api" class="anchor"></a>API</h2><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'e) t</span></span><span> = <span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>'a</code> is the result type in case of success and <code>'e</code> is the result type in case of failure. It is implemented by the ocaml type <code>result</code> from the ocaml standard library.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-return"><a href="#val-return" class="anchor"></a><code><span><span class="keyword">val</span> return : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>return a</code> Equivalent to <code>Ok a</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fail"><a href="#val-fail" class="anchor"></a><code><span><span class="keyword">val</span> fail : <span><span class="type-var">'e</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>fail e</code> Equivalent to <code>Error e</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_option"><a href="#val-to_option" class="anchor"></a><code><span><span class="keyword">val</span> to_option : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span></span></code></div><div class="spec-doc"><p><code>to_option r</code> Map <code>r</code> to an optional element i.e. <code>Some a</code> in case of <code>Ok a</code> and <code>None</code> in case of <code>Error _</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&gt;&gt;=)"><a href="#val-(&gt;&gt;=)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;&gt;=) : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>m &gt;&gt;= f</code></p><p>maps success result <code>m</code> to <code>f a</code>. In case of an error result <code>f</code> is not called and the error remains.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(let*)"><a href="#val-(let*)" class="anchor"></a><code><span><span class="keyword">val</span> (let*) : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>let* a = m in f a</code> is the same as <code>m &gt;&gt;= f</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>map f m</code> Map the result in <code>m</code> via the function <code>f</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_error"><a href="#val-map_error" class="anchor"></a><code><span><span class="keyword">val</span> map_error : <span><span>(<span><span class="type-var">'e</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'f</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'f</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>map_error f m</code> Map the error in <code>m</code> via the function <code>f</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><span><span>(<span class="type-var">'a</span>, <a href="../Void/index.html#type-t">Void.t</a>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>get m</code> Get the ok content of a result object which cannot have errors.</p></div></div><h2 id="monad"><a href="#monad" class="anchor"></a>Monad</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Monad"><a href="#module-Monad" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Monad/index.html">Monad</a></span><span> (<a href="Monad/argument-1-E/index.html">E</a> : <a href="../Interfaces/module-type-ANY/index.html">Interfaces.ANY</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The result type encapsulated in a module which satisfies the monadic interface.</p></div></div></div></body></html>
