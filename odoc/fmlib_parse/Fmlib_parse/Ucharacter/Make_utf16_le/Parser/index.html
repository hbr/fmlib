<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Parser (fmlib_parse.Fmlib_parse.Ucharacter.Make_utf16_le.Parser)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">Index</a> &#x00BB; <a href="../../../../index.html">fmlib_parse</a> &#x00BB; <a href="../../../index.html">Fmlib_parse</a> &#x00BB; <a href="../../index.html">Ucharacter</a> &#x00BB; <a href="../index.html">Make_utf16_le</a> &#x00BB; Parser</nav><header class="odoc-preamble"><h1>Module <code><span>Make_utf16_le.Parser</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#feeding-tokens">Feeding Tokens</a></li><li><a href="#success">Success</a></li><li><a href="#syntax-errors">Syntax Errors</a></li><li><a href="#semantic-errors">Semantic Errors</a></li><li><a href="#state">State</a></li><li><a href="#lookaheads">Lookaheads</a></li><li><a href="#position-information">Position Information</a></li><li><a href="#run-the-parser-on-streams">Run the Parser on Streams</a></li></ul></nav></div><div class="odoc-content"><p>A parser <code>p</code> is a sink of token. As long as it signals <code>needs_more p</code> more token can be pushed into the parser via <code>put token p</code> or the input stream can be ended via <code>put_end p</code>.</p><p><code>has_ended  p</code> is equivalent to <code>not (needs_more p)</code>. <code>has_ended  p</code> signals that the parser has either succeeded or failed.</p><p>If it has succeeded the final value is available via <code>final p</code>.</p><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Type of the parser.</p></div></div><h2 id="feeding-tokens"><a href="#feeding-tokens" class="anchor"></a>Feeding Tokens</h2><div class="odoc-spec"><div class="spec type anchored" id="type-token"><a href="#type-token" class="anchor"></a><code><span><span class="keyword">type</span> token</span><span> = <a href="../../../Utf16/Le/Decoder/index.html#type-t">Utf16.Le.Decoder.t</a></span></code></div><div class="spec-doc"><p>Type of the tokens.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-item"><a href="#type-item" class="anchor"></a><code><span><span class="keyword">type</span> item</span><span> = <a href="#type-token">token</a></span></code></div><div class="spec-doc"><p>In order to conform to the interface <a href="../../../../../fmlib_std/Fmlib_std/Interfaces/module-type-SINK/index.html"><code>Fmlib_std.Interfaces.SINK</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-needs_more"><a href="#val-needs_more" class="anchor"></a><code><span><span class="keyword">val</span> needs_more : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>needs_more p</code> Does the parser <code>p</code> need more tokens?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-put"><a href="#val-put" class="anchor"></a><code><span><span class="keyword">val</span> put : <span><a href="#type-token">token</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>put tok p</code> Push token <code>tok</code> into the parser <code>p</code>.</p><p>Even if the parser has ended, more tokens can be pushed into the parser. The parser stores the token as lookahead token.</p><p>If the parser has already received the end of the token stream via <a href="#val-put_end"><code>put_end</code></a>, then all subsequent tokens are ignored.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-put_end"><a href="#val-put_end" class="anchor"></a><code><span><span class="keyword">val</span> put_end : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>put_end p</code> Push and end token into the parser <code>p</code>.</p></div></div><h2 id="success"><a href="#success" class="anchor"></a>Success</h2><div class="odoc-spec"><div class="spec type anchored" id="type-final"><a href="#type-final" class="anchor"></a><code><span><span class="keyword">type</span> final</span><span> = <a href="../argument-2-Final/index.html#type-t">Final.t</a></span></code></div><div class="spec-doc"><p>Type of the final result.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-has_succeeded"><a href="#val-has_succeeded" class="anchor"></a><code><span><span class="keyword">val</span> has_succeeded : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>has_succeeded p</code> Has the parser <code>p</code> succeeded?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-has_ended"><a href="#val-has_ended" class="anchor"></a><code><span><span class="keyword">val</span> has_ended : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>has_ended p</code> Has the parser <code>p</code> ended parsing and either succeeded or failed?</p><p><code>has_ended p</code> is the same as <code>not (needs_more p)</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-final"><a href="#val-final" class="anchor"></a><code><span><span class="keyword">val</span> final : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-final">final</a></span></code></div><div class="spec-doc"><p><code>final p</code> The final object constructed by the parser <code>p</code> in case of success.</p><p>Precondition: <code>has_succeeded p</code></p></div></div><h2 id="syntax-errors"><a href="#syntax-errors" class="anchor"></a>Syntax Errors</h2><div class="odoc-spec"><div class="spec type anchored" id="type-expect"><a href="#type-expect" class="anchor"></a><code><span><span class="keyword">type</span> expect</span><span> = string * <span><a href="../../../Indent/index.html#type-expectation">Indent.expectation</a> option</span></span></code></div><div class="spec-doc"><p>Type of expectations.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-has_failed_syntax"><a href="#val-has_failed_syntax" class="anchor"></a><code><span><span class="keyword">val</span> has_failed_syntax : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>has_failed_syntax p</code> Has the parser <code>p</code> failed with a syntax error?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-failed_expectations"><a href="#val-failed_expectations" class="anchor"></a><code><span><span class="keyword">val</span> failed_expectations : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-expect">expect</a> list</span></span></code></div><div class="spec-doc"><p><code>failed_expectations p</code> The failed expectations due to a syntax error.</p><p>Precondition: <code>has_failed_syntax p</code></p></div></div><h2 id="semantic-errors"><a href="#semantic-errors" class="anchor"></a>Semantic Errors</h2><div class="odoc-spec"><div class="spec type anchored" id="type-semantic"><a href="#type-semantic" class="anchor"></a><code><span><span class="keyword">type</span> semantic</span><span> = <a href="../argument-3-Semantic/index.html#type-t">Semantic.t</a></span></code></div><div class="spec-doc"><p>Type of semantic errors.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-has_failed_semantic"><a href="#val-has_failed_semantic" class="anchor"></a><code><span><span class="keyword">val</span> has_failed_semantic : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Has the parser failed because of a semantic error?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-failed_semantic"><a href="#val-failed_semantic" class="anchor"></a><code><span><span class="keyword">val</span> failed_semantic : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-semantic">semantic</a></span></code></div><div class="spec-doc"><p>The semantic error encountered.</p><p>Precondition: A semantic error has occurred.</p></div></div><h2 id="state"><a href="#state" class="anchor"></a>State</h2><div class="odoc-spec"><div class="spec type anchored" id="type-state"><a href="#type-state" class="anchor"></a><code><span><span class="keyword">type</span> state</span><span> = <a href="../argument-1-State/index.html#type-t">State.t</a></span></code></div><div class="spec-doc"><p>Type of the state of the parser (in many cases <code>unit</code>)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-state"><a href="#val-state" class="anchor"></a><code><span><span class="keyword">val</span> state : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-state">state</a></span></code></div><div class="spec-doc"><p>The state of the parser.</p></div></div><h2 id="lookaheads"><a href="#lookaheads" class="anchor"></a>Lookaheads</h2><div class="odoc-spec"><div class="spec value anchored" id="val-has_lookahead"><a href="#val-has_lookahead" class="anchor"></a><code><span><span class="keyword">val</span> has_lookahead : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>has_lookahead p</code> Are there any unconsumed lookahead tokens in the buffer or has the end token not yet been consumed?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-first_lookahead_token"><a href="#val-first_lookahead_token" class="anchor"></a><code><span><span class="keyword">val</span> first_lookahead_token : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-token">token</a> option</span></span></code></div><div class="spec-doc"><p>The first lookahead token (or <code>None</code> in case there is none).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-has_received_end"><a href="#val-has_received_end" class="anchor"></a><code><span><span class="keyword">val</span> has_received_end : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>has_received_end p</code> Has the parser <code>p</code> already received the end of token stream via <code>put_end</code>?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-has_consumed_end"><a href="#val-has_consumed_end" class="anchor"></a><code><span><span class="keyword">val</span> has_consumed_end : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>has_consumed_end p</code> Has the parser <code>p</code> already received the end of token stream via <code>put_end</code> and consumed it?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_lookahead"><a href="#val-fold_lookahead" class="anchor"></a><code><span><span class="keyword">val</span> fold_lookahead : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-token">token</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>fold_lookahead a  ftok fend p</code></p><p>Fold the lookahead tokens with the start value <code>a</code> and the folding function <code>ftok</code>. At the end of the lookahead tokens, call <code>fend</code> if there is an unconsumed end.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-transfer_lookahead"><a href="#val-transfer_lookahead" class="anchor"></a><code><span><span class="keyword">val</span> transfer_lookahead : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>transfer_lookahead p_old p_new</code></p><p>Transfer the lookahead tokens from <code>p_old</code> to <code>p_new</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lookaheads"><a href="#val-lookaheads" class="anchor"></a><code><span><span class="keyword">val</span> lookaheads : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-token">token</a> array</span> * bool</span></code></div><div class="spec-doc"><p><code>lookaheads p</code> The lookahead token and and end flag of the parser <code>p</code>.</p><p>The end flag indicates that the end token has already been received via <code>put_end p</code>.</p></div></div><h2 id="position-information"><a href="#position-information" class="anchor"></a>Position Information</h2><div class="odoc-spec"><div class="spec value anchored" id="val-position"><a href="#val-position" class="anchor"></a><code><span><span class="keyword">val</span> position : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../Position/index.html#type-t">Position.t</a></span></code></div><div class="spec-doc"><p><code>position p</code> The current position in the input stream.</p><p>Can be called at any time.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-line"><a href="#val-line" class="anchor"></a><code><span><span class="keyword">val</span> line : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>line p</code> The current line in the input stream.</p><p>Can be called at any time.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column"><a href="#val-column" class="anchor"></a><code><span><span class="keyword">val</span> column : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>column p</code> The current column in the input stream.</p><p>Can be called at any time.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-byte_column"><a href="#val-byte_column" class="anchor"></a><code><span><span class="keyword">val</span> byte_column : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>byte_column p</code> The current byte_column in the input stream.</p><p>Can be called at any time.</p></div></div><h2 id="run-the-parser-on-streams"><a href="#run-the-parser-on-streams" class="anchor"></a>Run the Parser on Streams</h2><div class="odoc-spec"><div class="spec value anchored" id="val-run_on_string"><a href="#val-run_on_string" class="anchor"></a><code><span><span class="keyword">val</span> run_on_string : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>run_on_string str p</code> Run the parser <code>p</code> on the string <code>str</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_on_string_at"><a href="#val-run_on_string_at" class="anchor"></a><code><span><span class="keyword">val</span> run_on_string_at : <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int * <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>run_on_string str start p</code> Run the parser <code>p</code> on the string <code>str</code> starting at index <code>start</code> Return the parser and the index next to be pushed in.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_on_channel"><a href="#val-run_on_channel" class="anchor"></a><code><span><span class="keyword">val</span> run_on_channel : <span><span class="xref-unresolved">Stdlib</span>.in_channel <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>run_on_channel ic p</code> Run the parser <code>p</code> on input channel <code>ic</code>.</p></div></div></div></body></html>
