<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Subscription (fmlib_browser.Fmlib_browser.Subscription)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">fmlib_browser</a> &#x00BB; <a href="../index.html">Fmlib_browser</a> &#x00BB; Subscription</nav><header class="odoc-preamble"><h1>Module <code><span>Fmlib_browser.Subscription</span></code></h1><p>Subscriptions to global events.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#basics">Basics</a></li><li><a href="#events-on-the-window-object">Events on the window object</a></li><li><a href="#incoming-messages-from-javascript">Incoming messages from javascript</a></li><li><a href="#timer-events">Timer events</a></li><li><a href="#keyboard-events">Keyboard events</a></li><li><a href="#mouse-events">Mouse events</a></li><li><a href="#window-resize">Window resize</a></li><li><a href="#visibility-change">Visibility change</a></li></ul></nav></div><div class="odoc-content"><h2 id="basics"><a href="#basics" class="anchor"></a>Basics</h2><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'m t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-none"><a href="#val-none" class="anchor"></a><code><span><span class="keyword">val</span> none : <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-batch"><a href="#val-batch" class="anchor"></a><code><span><span class="keyword">val</span> batch : <span><span><span><span class="type-var">'m</span> <a href="#type-t">t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div></div><h2 id="events-on-the-window-object"><a href="#events-on-the-window-object" class="anchor"></a>Events on the window object</h2><div class="odoc-spec"><div class="spec value anchored" id="val-on_window"><a href="#val-on_window" class="anchor"></a><code><span><span class="keyword">val</span> on_window : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'m</span> <a href="../Decoder/index.html#type-t">Decoder.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>on_window event_type decode</code></p><p>Subscribe to window events of type <code>event_type</code>. Examples</p><pre class="language-ocaml"><code>    on_window &quot;resize&quot;  decode
    on_window &quot;keydown&quot; decode</code></pre></div></div><h2 id="incoming-messages-from-javascript"><a href="#incoming-messages-from-javascript" class="anchor"></a>Incoming messages from javascript</h2><div class="odoc-spec"><div class="spec value anchored" id="val-on_message"><a href="#val-on_message" class="anchor"></a><code><span><span class="keyword">val</span> on_message : <span><span><span class="type-var">'m</span> <a href="../Decoder/index.html#type-t">Decoder.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>on_message decode</code></p><p>Subscribe to incoming messages from the javascript world. If there is an incoming message (a javascript object) then decode the object with the help of the function <code>decode</code> and send the decoded value as a message to the update function of the application.</p></div></div><h2 id="timer-events"><a href="#timer-events" class="anchor"></a>Timer events</h2><div class="odoc-spec"><div class="spec value anchored" id="val-every"><a href="#val-every" class="anchor"></a><code><span><span class="keyword">val</span> every : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="../Time/index.html#type-t">Time.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>every millis f</code> Subscribe to an event which is fired every <code>millis</code> milliseconds. Use <code>f</code> to map the posix time into a message for the update function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-on_animation"><a href="#val-on_animation" class="anchor"></a><code><span><span class="keyword">val</span> on_animation : <span><span>(<span><a href="../Time/index.html#type-t">Time.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>on_animation f</code></p><p>Subscribe to the <code>requestAnimationFrame</code> event. The callback gets the posix time at the event.</p></div></div><h2 id="keyboard-events"><a href="#keyboard-events" class="anchor"></a>Keyboard events</h2><div class="odoc-spec"><div class="spec value anchored" id="val-on_keydown"><a href="#val-on_keydown" class="anchor"></a><code><span><span class="keyword">val</span> on_keydown : <span><span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-on_keyup"><a href="#val-on_keyup" class="anchor"></a><code><span><span class="keyword">val</span> on_keyup : <span><span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div></div><h2 id="mouse-events"><a href="#mouse-events" class="anchor"></a>Mouse events</h2><p>The following mouse event subscriptions just decode the <code>clientX</code> and <code>clientY</code> value of the mouse event. But a mouse event has much more information. You can get a customized subscription which decodes more mouse event data by just writing a decoder <code>decode</code> which decodes all values from a mouse event which are of interest and subscribe to the mouse event e.g. by <code>on_window &quot;mouseup&quot; decode</code>.</p><div class="odoc-spec"><div class="spec value anchored" id="val-on_mouse_down"><a href="#val-on_mouse_down" class="anchor"></a><code><span><span class="keyword">val</span> on_mouse_down : <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Subscribe to mousedown events.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-on_mouse_move"><a href="#val-on_mouse_move" class="anchor"></a><code><span><span class="keyword">val</span> on_mouse_move : <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Subscribe to mousemove events.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-on_mouse_up"><a href="#val-on_mouse_up" class="anchor"></a><code><span><span class="keyword">val</span> on_mouse_up : <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Subscribe to mouseup events.</p></div></div><h2 id="window-resize"><a href="#window-resize" class="anchor"></a>Window resize</h2><div class="odoc-spec"><div class="spec value anchored" id="val-on_resize"><a href="#val-on_resize" class="anchor"></a><code><span><span class="keyword">val</span> on_resize : <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>on_resize f</code> Subscribe to the window resize event and report the <code>innerWidth</code> and <code>innerHeight</code> properties to the function <code>f</code> to generate the message for the update function.</p></div></div><h2 id="visibility-change"><a href="#visibility-change" class="anchor"></a>Visibility change</h2><div class="odoc-spec"><div class="spec value anchored" id="val-on_visibility_change"><a href="#val-on_visibility_change" class="anchor"></a><code><span><span class="keyword">val</span> on_visibility_change : <span><span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'m</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>on_visibility_change f</code> Subscribe to the window visibility change event and report the visibility state which is either &quot;visible&quot; or &quot;hidden&quot; to the function <code>f</code> to generate the message for the update function.</p></div></div></div></body></html>
