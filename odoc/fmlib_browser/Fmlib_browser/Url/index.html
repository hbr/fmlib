<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Url (fmlib_browser.Fmlib_browser.Url)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">fmlib_browser</a> &#x00BB; <a href="../index.html">Fmlib_browser</a> &#x00BB; Url</nav><header class="odoc-preamble"><h1>Module <code><span>Fmlib_browser.Url</span></code></h1><p>Construct and parse URLs.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#basics">Basics</a></li><li><a href="#percent-encoding">Percent-encoding</a></li><li><a href="#builders-and-parsers">Builders and parsers</a></li></ul></nav></div><div class="odoc-content"><h2 id="basics"><a href="#basics" class="anchor"></a>Basics</h2><div class="odoc-spec"><div class="spec type anchored" id="type-protocol"><a href="#type-protocol" class="anchor"></a><code><span><span class="keyword">type</span> protocol</span><span> = </span></code><ol><li id="type-protocol.Http" class="def variant constructor anchored"><a href="#type-protocol.Http" class="anchor"></a><code><span>| </span><span><span class="constructor">Http</span></span></code></li><li id="type-protocol.Https" class="def variant constructor anchored"><a href="#type-protocol.Https" class="anchor"></a><code><span>| </span><span><span class="constructor">Https</span></span></code></li></ol></div><div class="spec-doc"><p>The protocol (a.k.a. scheme) of the URL. Only web-related protocols are supported.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><ol><li id="type-t.protocol" class="def record field anchored"><a href="#type-t.protocol" class="anchor"></a><code><span>protocol : <a href="#type-protocol">protocol</a>;</span></code></li><li id="type-t.host" class="def record field anchored"><a href="#type-t.host" class="anchor"></a><code><span>host : string;</span></code></li><li id="type-t.port" class="def record field anchored"><a href="#type-t.port" class="anchor"></a><code><span>port : <span>int option</span>;</span></code></li><li id="type-t.path" class="def record field anchored"><a href="#type-t.path" class="anchor"></a><code><span>path : string;</span></code></li><li id="type-t.query" class="def record field anchored"><a href="#type-t.query" class="anchor"></a><code><span>query : <span>string option</span>;</span></code></li><li id="type-t.fragment" class="def record field anchored"><a href="#type-t.fragment" class="anchor"></a><code><span>fragment : <span>string option</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The parts of a URL.</p><p>The <a href="https://tools.ietf.org/html/rfc3986">URL spec</a> defines the parts like this:</p><pre class="language-ocaml"><code>      https://example.com:8042/over/there?name=ferret#nose
      \___/   \______________/\_________/ \_________/ \__/
        |            |            |            |        |
      scheme     authority       path        query   fragment</code></pre><p>The strings in this type are not transformed in any way yet. The <a href="Parser/index.html"><code>Parser</code></a> module has functions for that, e.g. splitting the path into segments, accessing specific query parameters and decoding the results into custom data types.</p><p>Other parts of this library like <a href="../Command/index.html#val-http_request"><code>Command.http_request</code></a> require URLs as strings. Those should be constructed directly using functions from the <a href="Builder/index.html"><code>Builder</code></a> module, e.g <a href="Builder/index.html#val-absolute"><code>Builder.absolute</code></a> or <a href="Builder/index.html#val-custom"><code>Builder.custom</code></a>.</p><p>NOTE: Not all URL features from the URL spec are supported. For example, the <code>userinfo</code> segment as part of the <code>authority</code> is not supported.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span><span class="keyword">val</span> of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div><div class="spec-doc"><p><code>of_string s</code> tries to split <code>s</code> into its URL parts.</p><p>Examples:</p><pre class="language-ocaml"><code>    of_string &quot;http://example.com:443&quot;
    =
    Some
        {
            protocol = Http;
            host = &quot;example.com&quot;;
            port = Some 443;
            path = &quot;/&quot;;
            query = None;
            fragment = None;
        }

    of_string &quot;https://example.com/hats?q=top%20hat&quot;
    =
    Some
        {
            protocol = Https;
            host: &quot;example.com&quot;;
            port = None;
            path = &quot;/hats&quot;;
            query = Some &quot;q=top%20hat&quot;;
            fragment = None;
        }

    of_string &quot;example.com:443&quot; = None (* no protocol *)

    of_string &quot;http://tom@example.com&quot; = None (* userinfo not allowed *)

    of_string &quot;http://#cats&quot; = None (* no host *)</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>to_string url</code> serializes the given <code>url</code> into a string.</p><p>This is useful, when we have a <a href="#type-t" title="t">Url.t</a> and need to pass it on as string to <a href="../Command/index.html#val-push_url"><code>Command.push_url</code></a> or <a href="../index.html#val-debug"><code>debug</code></a>. For constructing URL strings from scratch, it is more convenient to use functions from the <a href="Builder/index.html"><code>Builder</code></a> module, e.g <a href="Builder/index.html#val-absolute"><code>Builder.absolute</code></a> or <a href="Builder/index.html#val-custom"><code>Builder.custom</code></a>.</p></div></div><h2 id="percent-encoding"><a href="#percent-encoding" class="anchor"></a>Percent-encoding</h2><div class="odoc-spec"><div class="spec value anchored" id="val-percent_encode_part"><a href="#val-percent_encode_part" class="anchor"></a><code><span><span class="keyword">val</span> percent_encode_part : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>percent_encode_part s</code> encodes a part of a URL by escaping special characters like <code>?</code>, <code>/</code> or non-ASCII characters. This uses Javascript's <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent">encodeURIComponent</a> internally.</p><p>Normally the <a href="Builder/index.html"><code>Builder</code></a> module should be used for constructing URLs. This function is here for exceptional cases that require more control.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-percent_decode_part"><a href="#val-percent_decode_part" class="anchor"></a><code><span><span class="keyword">val</span> percent_decode_part : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p><code>percent_decode-part s</code> decodes a part of a URL recovering special characters like <code>?</code>, <code>/</code> or non-ASCII characters. This uses Javascript's <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent">decodeURIComponent</a> internally.</p><p>Normally the <a href="Parser/index.html"><code>Parser</code></a> module should be used for decoding URLs. This function is here for exceptional cases that require more control.</p></div></div><h2 id="builders-and-parsers"><a href="#builders-and-parsers" class="anchor"></a>Builders and parsers</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Builder"><a href="#module-Builder" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Builder/index.html">Builder</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Construct URLs.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Parser"><a href="#module-Parser" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Parser/index.html">Parser</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Parse URLs.</p></div></div></div></body></html>
