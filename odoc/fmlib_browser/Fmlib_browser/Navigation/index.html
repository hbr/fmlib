<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Navigation (fmlib_browser.Fmlib_browser.Navigation)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">fmlib_browser</a> &#x00BB; <a href="../index.html">Fmlib_browser</a> &#x00BB; Navigation</nav><header class="odoc-preamble"><h1>Module <code><span>Fmlib_browser.Navigation</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-url_request"><a href="#type-url_request" class="anchor"></a><code><span><span class="keyword">type</span> url_request</span><span> = </span></code><ol><li id="type-url_request.Internal" class="def variant constructor anchored"><a href="#type-url_request.Internal" class="anchor"></a><code><span>| </span><span><span class="constructor">Internal</span> <span class="keyword">of</span> <a href="../Url/index.html#type-t">Url.t</a></span></code></li><li id="type-url_request.External" class="def variant constructor anchored"><a href="#type-url_request.External" class="anchor"></a><code><span>| </span><span><span class="constructor">External</span> <span class="keyword">of</span> string</span></code></li></ol></div><div class="spec-doc"><p>When the user clicks a link in an <a href="../index.html#val-application"><code>application</code></a>, the URL is not changed directly. Instead a <a href="#type-url_request"><code>url_request</code></a> is passed to the application's <code>on_url_request</code> handler. The resulting message must be handled in the application's <code>update</code> function.</p><p>This mechanism allows the application to prepare for the URL change, e.g. persist important data on the server or in local storage.</p><p>A <code>url_request</code> can be either</p><ul><li>an <a href="#type-url_request.Internal"><code>Internal</code></a> URL with the same origin as the application. The user is about to change pages within the application. <a href="../Command/index.html#val-push_url" title="Command.push_url">push_url</a> should be used to perform the URL change.</li></ul><ul><li>an <a href="#type-url_request.External"><code>External</code></a> URL with a different origin than the application. The user is about to be redirected to an external site. <a href="../Command/index.html#val-load" title="Command.load">load</a> should be used to continue.</li></ul><p>NOTE: The origin consists of the <code>protocol</code>, the <code>host</code>, and the <code>port</code> of the URL. If any of those changes, the new URL is seen as an <a href="#type-url_request.External"><code>External</code></a> URL.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-key"><a href="#type-key" class="anchor"></a><code><span><span class="keyword">type</span> <span>'m key</span></span></code></div><div class="spec-doc"><p>This navigation key is handed to the <a href="../index.html#val-application"><code>application</code></a> through its <code>init</code> function. It is needed for the navigation commands <a href="../Command/index.html#val-push_url" title="Command.push_url">push_url</a>, <a href="../Command/index.html#val-replace_url" title="Command.replace_url">replace_url</a>, <a href="../Command/index.html#val-back" title="Command.back">back</a> and <a href="../Command/index.html#val-forward" title="Command.forward">forward</a>.</p><p>This means that those commands are only available in a full <a href="../index.html#val-application"><code>application</code></a> which controls the whole browser window and not in other kinds of programs that only control a part of it such as <a href="../index.html#val-element"><code>element</code></a>. This restriction exists to prevent subtle synchronization bugs related to URL changes.</p><p>For example, when part of the website is controlled by an <a href="../index.html#val-element"><code>element</code></a> and another part is controlled by a <code>React</code> component and one of them changes the URL, the other needs to be informed about it. The navigation key restriction forces the programmer to implement URL changes and a synchronization mechanism outside of both components.</p><p>The same restriction exists in <code>elm/browser</code>. See <a href="https://github.com/elm/browser/blob/1.0.2/notes/navigation-in-elements.md">this document</a> for a more detailed explanation.</p></div></div></div></body></html>
